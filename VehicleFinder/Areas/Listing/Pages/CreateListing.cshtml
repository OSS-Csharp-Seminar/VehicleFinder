@page
@model VehicleFinder.Areas.Listing.Pages.CreateListingModel
@{
    ViewData["Title"] = "Create Listing";
}

<h1>Create Listing</h1>

<form method="post">
    <div class="form-group row">
        <label asp-for="GeneralListing.Listing.Title" class="col-sm-2 col-form-label">Title:</label>
        <div class="col-sm-10">
            <input asp-for="GeneralListing.Listing.Title" class="form-control mb-3" />
            <span asp-validation-for="GeneralListing.Listing.Title" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Listing.Description" class="col-sm-2 col-form-label">Description:</label>
        <div class="col-sm-10">
            <textarea asp-for="GeneralListing.Listing.Description" class="form-control mb-3"></textarea>
            <span asp-validation-for="GeneralListing.Listing.Description" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Listing.ContactNumber" class="col-sm-2 col-form-label">Contact number:</label>
        <div class="col-sm-10">
            <textarea asp-for="GeneralListing.Listing.ContactNumber" class="form-control mb-3"></textarea>
            <span asp-validation-for="GeneralListing.Listing.ContactNumber" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Listing.Price" class="col-sm-2 col-form-label">Price in EUR:</label>
        <div class="col-sm-10">
            <input asp-for="GeneralListing.Listing.Price" class="form-control mb-3" />
            <span asp-validation-for="GeneralListing.Listing.Price" class="text-danger"></span>
        </div>
    </div>
    <h3 class="mt-4 mb-3">Vehicle Information</h3>
    <div class="form-group row">
        <label asp-for="GeneralListing.Vehicle.Brand" class="col-sm-2 col-form-label">Brand:</label>
        <div class="col-sm-10">
            <select asp-for="GeneralListing.Vehicle.Brand" class="form-control mb-3" asp-items="Html.GetEnumSelectList<VehicleFinder.Enums.CarManufacturer>()"></select>
            <span asp-validation-for="GeneralListing.Vehicle.Brand" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Vehicle.Model" class="col-sm-2 col-form-label">Model:</label>
        <div class="col-sm-10">
            <input asp-for="GeneralListing.Vehicle.Model" class="form-control mb-3" />
            <span asp-validation-for="GeneralListing.Vehicle.Model" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Vehicle.ManufacturingYear" class="col-sm-2 col-form-label">Manufacturing Year:</label>
        <div class="col-sm-10">
            <input asp-for="GeneralListing.Vehicle.ManufacturingYear" class="form-control mb-3" />
            <span asp-validation-for="GeneralListing.Vehicle.ManufacturingYear" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Vehicle.RegistrationUntil" class="col-sm-2 col-form-label">Registration Until:</label>
        <div class="col-sm-10">
            <input asp-for="GeneralListing.Vehicle.RegistrationUntil" class="form-control mb-3" />
            <span asp-validation-for="GeneralListing.Vehicle.RegistrationUntil" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Vehicle.Kilometers" class="col-sm-2 col-form-label">Kilometers:</label>
        <div class="col-sm-10">
            <input asp-for="GeneralListing.Vehicle.Kilometers" class="form-control mb-3" />
            <span asp-validation-for="GeneralListing.Vehicle.Kilometers" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Vehicle.NumberOfPreviousOwners" class="col-sm-2 col-form-label">Number of Previous Owners:</label>
        <div class="col-sm-10">
            <input asp-for="GeneralListing.Vehicle.NumberOfPreviousOwners" class="form-control mb-3" />
            <span asp-validation-for="GeneralListing.Vehicle.NumberOfPreviousOwners" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Vehicle.ShifterType" class="col-sm-2 col-form-label">Shifter Type:</label>
        <div class="col-sm-10">
            <select asp-for="GeneralListing.Vehicle.ShifterType" class="form-control mb-3" asp-items="Html.GetEnumSelectList<VehicleFinder.Enums.ShifterType>()"></select>
            <span asp-validation-for="GeneralListing.Vehicle.ShifterType" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Vehicle.GearCount" class="col-sm-2 col-form-label">Gear Count:</label>
        <div class="col-sm-10">
            <input asp-for="GeneralListing.Vehicle.GearCount" class="form-control mb-3" />
            <span asp-validation-for="GeneralListing.Vehicle.GearCount" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Vehicle.AverageConsumption" class="col-sm-2 col-form-label">Average Consumption:</label>
        <div class="col-sm-10">
            <input asp-for="GeneralListing.Vehicle.AverageConsumption" type="number" step="0.1" class="form-control mb-3" />
            <span asp-validation-for="GeneralListing.Vehicle.AverageConsumption" class="text-danger"></span>
        </div>
    </div>

    <h3 class="mt-4 mb-3">Body Information</h3>
    <div class="form-group row">
        <label asp-for="GeneralListing.Body.DrivetrainType" class="col-sm-2 col-form-label">Drivetrain Type:</label>
        <div class="col-sm-10">
            <select asp-for="GeneralListing.Body.DrivetrainType" class="form-control mb-3" asp-items="Html.GetEnumSelectList<VehicleFinder.Enums.DrivetrainType>()"></select>
            <span asp-validation-for="GeneralListing.Body.DrivetrainType" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Body.DoorCount" class="col-sm-2 col-form-label">Door Count:</label>
        <div class="col-sm-10">
            <input asp-for="GeneralListing.Body.DoorCount" class="form-control mb-3" />
            <span asp-validation-for="GeneralListing.Body.DoorCount" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Body.SeatCount" class="col-sm-2 col-form-label">Seat Count:</label>
        <div class="col-sm-10">
            <input asp-for="GeneralListing.Body.SeatCount" class="form-control mb-3" />
            <span asp-validation-for="GeneralListing.Body.SeatCount" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="GeneralListing.Body.Color" class="col-sm-2 col-form-label">Color:</label>
        <div class="col-sm-10">
            <input asp-for="GeneralListing.Body.Color" class="form-control mb-3" />
            <span asp-validation-for="GeneralListing.Body.Color" class="text-danger"></span>
        </div>
    </div>

    <h3 class="mt-4 mb-3">Engine Information</h3>
    <div class="form-group row">
        <label class="col-sm-2 col-form-label">Engine Option:</label>
        <div class="col-sm-10">
            <input type="checkbox" id="newEngineCheckbox" onchange="toggleEngineFields()" /> Write a new engine
        </div>
    </div>

    <div id="selectEngineDiv" class="form-group row">
        <label asp-for="SelectedEngineId" class="col-sm-2 col-form-label">Select Engine:</label>
        <div class="col-sm-10">
            <select asp-for="SelectedEngineId" class="form-control mb-3" asp-items="Model.EngineList">
                <option value="">Select an existing engine</option>
            </select>
        </div>
    </div>

    <div id="newEngineDiv" class="d-none">
        <div class="form-group row">
            <label asp-for="GeneralListing.Engine.Name" class="col-sm-2 col-form-label">Engine Name:</label>
            <div class="col-sm-10">
                <input asp-for="GeneralListing.Engine.Name" class="form-control mb-3" />
                <span asp-validation-for="GeneralListing.Engine.Name" class="text-danger"></span>
            </div>
        </div>
        <div class="form-group row">
            <label asp-for="GeneralListing.Engine.FuelType" class="col-sm-2 col-form-label">Fuel Type:</label>
            <div class="col-sm-10">
                <select asp-for="GeneralListing.Engine.FuelType" class="form-control mb-3" asp-items="Html.GetEnumSelectList<VehicleFinder.Enums.FuelType>()"></select>
                <span asp-validation-for="GeneralListing.Engine.FuelType" class="text-danger"></span>
            </div>
        </div>
        <div class="form-group row">
            <label asp-for="GeneralListing.Engine.Horsepower" class="col-sm-2 col-form-label">Horsepower:</label>
            <div class="col-sm-10">
                <input asp-for="GeneralListing.Engine.Horsepower" class="form-control mb-3" />
                <span asp-validation-for="GeneralListing.Engine.Horsepower" class="text-danger"></span>
            </div>
        </div>
        <div class="form-group row">
            <label asp-for="GeneralListing.Engine.EngineCapacity" class="col-sm-2 col-form-label">Engine Capacity:</label>
            <div class="col-sm-10">
                <input asp-for="GeneralListing.Engine.EngineCapacity" class="form-control mb-3" />
                <span asp-validation-for="GeneralListing.Engine.EngineCapacity" class="text-danger"></span>
            </div>
        </div>
    </div>

    <input type="hidden" asp-for="IsNewEngine" />

    <div class="form-group row">
        <div class="col-sm-10 offset-sm-2">
            <button type="submit" class="btn btn-primary">Create Listing</button>
        </div>
    </div>
</form>

<style>
    .mt-4 {
        margin-top: 1.5rem;
    }

    .mb-3 {
        margin-bottom: 1rem;
    }

    .d-none {
        display: none;
    }
</style>

<script>
    function toggleEngineFields() {
        var checkBox = document.getElementById("newEngineCheckbox");
        var selectEngineDiv = document.getElementById("selectEngineDiv");
        var newEngineDiv = document.getElementById("newEngineDiv");
        var isNewEngine = document.getElementById("IsNewEngine");

        if (checkBox.checked) {
            selectEngineDiv.classList.add("d-none");
            newEngineDiv.classList.remove("d-none");
            isNewEngine.value = "true";
        } else {
            selectEngineDiv.classList.remove("d-none");
            newEngineDiv.classList.add("d-none");
            isNewEngine.value = "false";
        }
    }
</script>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
